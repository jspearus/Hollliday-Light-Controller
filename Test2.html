<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Holiday Light Controller v.2.0</title>
  </head>
  <body>
    <div class="text-center text-primary">
      <h1>Holiday Lighting Controller</h1>
    </div>
    <div class="text-center text-muted">
      <h2>// version 2.0</h2>
    </div>
    <br>
    <br>

  <div id="app" >
    <div class="container-fluid">
      <div class="relativeflex flex-col">
        <div class="row justify-content-center text-center">
          <h3>
            <p>Control Status = {{ currentState }} </p>
          </h3>
        </div>
        <div class="row justify-content-center text-center">
          <h4>
            <p>Recieved Data = {{ displayData }} </p>
          </h4>
        </div>
        <div class="row-md-20 justify-content-center text-center">
          <br>
          <button @click="button('on')" class="btn btn-primary">On</button>
          <button @click="button('off')" class="btn btn-primary">Off</button>
          <button @click="button('start')" class="btn btn-primary">Start</button>
          <button @click="button('stop')" class="btn btn-primary">Stop</button>
        </div>
        <br>
        <div class="row-md-20 justify-content-center text-center">
          <button @click="button('test1')" class="btn btn-primary">Test1</button>
          <button @click="button('submit')" class="btn btn-primary">Submit</button>
          <button @click="button('test3')" class="btn btn-primary">Test3</button>
          <button @click="button('test4')" class="btn btn-primary">Test4</button>
        </div>
        <br>
        <div class="row-lg-20 offset-md-0 justify-content-center text-center">
          <svg style="height: 250px" >
            <rect id="px0" @click="clickPixel('0')" v-bind:style="{fill: color[0]}" x="0" y="0" width="25" height="25"/>
            <rect id="px1" @click="button('px1')" style="fill: black" x="30" y="0" width="25" height="25"/>
            <rect id="px2" @click="button('px2')"style="fill: black" x="60" y="0" width="25" height="25"/>
            <rect id="px3" @click="button('px3')"style="fill: black" x="90" y="0" width="25" height="25"/>
            <rect id="px4" @click="button('px4')" style="fill: black" x="120" y="0" width="25" height="25"/>
            <rect id="px5" @click="button('px5')" style="fill: black" x="150" y="0" width="25" height="25"/>
            <rect id="px6" @click="button('px6')"style="fill: black" x="180" y="0" width="25" height="25"/>
            <rect id="px7" @click="button('px7')"style="fill: black" x="210" y="0" width="25" height="25"/>
            <rect id="px8" @click="button('px8')" style="fill: black" x="0" y="30" width="25" height="25"/>
            <rect id="px9" @click="button('px9')" style="fill: black" x="30" y="30" width="25" height="25"/>
            <rect id="px10" @click="button('px10')"style="fill: black" x="60" y="30" width="25" height="25"/>
            <rect id="px11" @click="button('px11')"style="fill: black" x="90" y="30" width="25" height="25"/>
            <rect id="px12" @click="button('px12')" style="fill: black" x="120" y="30" width="25" height="25"/>
            <rect id="px13" @click="button('px13')" style="fill: black" x="150" y="30" width="25" height="25"/>
            <rect id="px14" @click="button('px14')"style="fill: black" x="180" y="30" width="25" height="25"/>
            <rect id="px15" @click="button('px15')"style="fill: black" x="210" y="30" width="25" height="25"/>
            <rect id="px16" @click="button('px16')" style="fill: black" x="0" y="60" width="25" height="25"/>
            <rect id="px17" @click="button('px17')" style="fill: black" x="30" y="60" width="25" height="25"/>
            <rect id="px18" @click="button('px18')"style="fill: black" x="60" y="60" width="25" height="25"/>
            <rect id="px19" @click="button('px19')"style="fill: black" x="90" y="60" width="25" height="25"/>
            <rect id="px20" @click="button('px20')" style="fill: black" x="120" y="60" width="25" height="25"/>
            <rect id="px21" @click="button('px21')" style="fill: black" x="150" y="60" width="25" height="25"/>
            <rect id="px22" @click="button('px22')"style="fill: black" x="180" y="60" width="25" height="25"/>
            <rect id="px23" @click="button('px23')"style="fill: black" x="210" y="60" width="25" height="25"/>
            <rect id="px24" @click="button('px24')" style="fill: black" x="0" y="90" width="25" height="25"/>
            <rect id="px25" @click="button('px25')" style="fill: black" x="30" y="90" width="25" height="25"/>
            <rect id="px26" @click="button('px26')"style="fill: black" x="60" y="90" width="25" height="25"/>
            <rect id="px27" @click="button('px27')"style="fill: black" x="90" y="90" width="25" height="25"/>
            <rect id="px28" @click="button('px28')" style="fill: black" x="120" y="90" width="25" height="25"/>
            <rect id="px29" @click="button('px29')" style="fill: black" x="150" y="90" width="25" height="25"/>
            <rect id="px30" @click="button('px30')"style="fill: black" x="180" y="90" width="25" height="25"/>
            <rect id="px31" @click="button('px31')"style="fill: black" x="210" y="90" width="25" height="25"/>
            <rect id="px32" @click="button('px32')" style="fill: black" x="0" y="120" width="25" height="25"/>
            <rect id="px33" @click="button('px33')" style="fill: black" x="30" y="120" width="25" height="25"/>
            <rect id="px34" @click="button('px34')"style="fill: black" x="60" y="120" width="25" height="25"/>
            <rect id="px35" @click="button('px35')"style="fill: black" x="90" y="120" width="25" height="25"/>
            <rect id="px36" @click="button('px36')" style="fill: black" x="120" y="120" width="25" height="25"/>
            <rect id="px37" @click="button('px37')" style="fill: black" x="150" y="120" width="25" height="25"/>
            <rect id="px38" @click="button('px38')"style="fill: black" x="180" y="120" width="25" height="25"/>
            <rect id="px39" @click="button('px39')"style="fill: black" x="210" y="120" width="25" height="25"/>
            <rect id="px40" @click="button('px40')" style="fill: black" x="0" y="150" width="25" height="25"/>
            <rect id="px41" @click="button('px41')" style="fill: black" x="30" y="150" width="25" height="25"/>
            <rect id="px42" @click="button('px42')"style="fill: black" x="60" y="150" width="25" height="25"/>
            <rect id="px43" @click="button('px43')"style="fill: black" x="90" y="150" width="25" height="25"/>
            <rect id="px44" @click="button('px44')" style="fill: black" x="120" y="150" width="25" height="25"/>
            <rect id="px45" @click="button('px45')" style="fill: black" x="150" y="150" width="25" height="25"/>
            <rect id="px46" @click="button('px46')"style="fill: black" x="180" y="150" width="25" height="25"/>
            <rect id="px47" @click="button('px47')"style="fill: black" x="210" y="150" width="25" height="25"/>
            <rect id="px48" @click="button('px48')" style="fill: black" x="0" y="180" width="25" height="25"/>
            <rect id="px49" @click="button('px49')" style="fill: black" x="30" y="180" width="25" height="25"/>
            <rect id="px50" @click="button('px50')"style="fill: black" x="60" y="180" width="25" height="25"/>
            <rect id="px51" @click="button('px51')"style="fill: black" x="90" y="180" width="25" height="25"/>
            <rect id="px52" @click="button('px52')" style="fill: black" x="120" y="180" width="25" height="25"/>
            <rect id="px53" @click="button('px53')" style="fill: black" x="150" y="180" width="25" height="25"/>
            <rect id="px54" @click="button('px54')"style="fill: black" x="180" y="180" width="25" height="25"/>
            <rect id="px55" @click="button('px55')"style="fill: black" x="210" y="180" width="25" height="25"/>
            <rect id="px56" @click="button('px56')" style="fill: black" x="0" y="210" width="25" height="25"/>
            <rect id="px57" @click="button('px57')" style="fill: black" x="30" y="210" width="25" height="25"/>
            <rect id="px58" @click="button('px58')"style="fill: black" x="60" y="210" width="25" height="25"/>
            <rect id="px59" @click="button('px59')"style="fill: black" x="90" y="210" width="25" height="25"/>
            <rect id="px60" @click="button('px60')" style="fill: black" x="120" y="210" width="25" height="25"/>
            <rect id="px61" @click="button('px61')" style="fill: black" x="150" y="210" width="25" height="25"/>
            <rect id="px62" @click="button('px62')"style="fill: black" x="180" y="210" width="25" height="25"/>
            <rect id="px63" @click="button('px63')"style="fill: black" x="210" y="210" width="25" height="25"/>
          </svg>
        </div>
        <div class="row-lg-20 offset-md-0 justify-content-center text-center">
          <h6> Color Selected = {{ cuColor }}</h6>
          <svg style="height: 70px" >
            <rect id="red" @click="cColor('red')" style="fill: red" x="0" y="0" width="25" height="25"/>
            <rect id="blue" @click="cColor('blue')" style="fill: blue" x="30" y="0" width="25" height="25"/>
            <rect id="green" @click="cColor('green')" style="fill: green" x="60" y="0" width="25" height="25"/>
            <rect id="yellow" @click="cColor('yellow')" style="fill: yellow" x="90" y="0" width="25" height="25"/>
            <rect id="orange" @click="cColor('orange')" style="fill: orange" x="120" y="0" width="25" height="25"/>
            <rect id="white" @click="cColor('white')" style="fill: white" x="150" y="0" width="25" height="25"/>
            <rect id="black" @click="cColor('black')" style="fill: black" x="180" y="0" width="25" height="25"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/particle-api-js@8/dist/particle.min.js"></script>

  <script>
    var app = new Vue({
        el: '#app',
        data: {
          cmd: 'off',
          currentState: 'off',
          token: '',
          recData: '',
          displayData: '',
          cuColor: 'black',
          color: ['red']
        },
        computed:{


        },
        methods: {
          button(command){
            this.cmd = command;
          },

          cColor(command){
            this.cuColor = command;
          },
          clickPixel(command){
            console.log(command);
            this.color[command] = this.cuColor;
          }
        },
        watch:{
          cmd: function(){
            //axios code here///////////////////////////////////////////
            axios.post('https://api.particle.io/v1/devices/2e002a000f47363336383437/Control?access_token=f604f4416be75092c41eff602c786278431c1ca9', {
              arg: this.cmd,
            })
            .then(function (response) {
              console.log(response);
            })
            .catch(function (error) {
              console.log(error);
            });
          },

        }
    })    
    //Particle code here
  
      app.particle = new Particle();
      app.particle.login({ username: 'jspearus@gmail.com', password: 'yqhevr2A' })
        .then(function(result) {
          console.log('Your access token', result.body.access_token);
          this.app.token = result.body.access_token;
        }, function(err) {
          console.error(err);
        });

        app.particle.getEventStream({ deviceId: '2e002a000f47363336383437', name: 'CurrentComm', auth: 'e4a94a5a7dae6fae374789bcfd88c44818fe7822' })
          .then(function(stream) {
              stream.on('event', function(data) {
                console.log("Event: ", data.data);
                app.currentState = data.data;
                app.displayData = "";
              });
            });

        app.particle.getEventStream({ deviceId: '2e002a000f47363336383437', name: 'dataRec', auth: 'e4a94a5a7dae6fae374789bcfd88c44818fe7822' })
          .then(function(stream) {
              stream.on('event', function(data) {
                console.log("Event: ", data.data);
                app.recData = data.data;
                if (app.recData == "Test Complete!") {
                  app.displayData = "if test complete";
                }
                else if (app.recData == "Test 3") {
                  app.displayData = "Else if test complete";
                }
                else if (app.recData == "submit") {
                  app.displayData = "Design has been added!";
                }
              });
            });

        app.particle.getVariable({ deviceId: '2e002a000f47363336383437', name: 'currentComm', auth: 'e4a94a5a7dae6fae374789bcfd88c44818fe7822' })
          .then(function(data) {
              console.log('Current Device Mode:', data.body.result);
              this.app.currentState = data.body.result;
            });
      
  </script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>